<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      Mercurial-7.1
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL-NS Stylesheets Vsnapshot" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-12.4">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch <span class="phrase">(System
        V</span> Edition) - Version 12.4
      </h4>
      <h3>
        Chapter&nbsp;13.&nbsp;Programming
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="luajit.html" title=
          "luajit-20250816">Prev</a>
          <p>
            luajit-20250816
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="nasm.html" title="NASM-2.16.03">Next</a>
          <p>
            NASM-2.16.03
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapter&nbsp;13.&nbsp;Programming">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch    (System V Edition) - Version 12.4">Home</a>
        </li>
      </ul>
    </div>
    <h1 class="sect1">
      <a id="mercurial" name="mercurial"></a>Mercurial-7.1
    </h1>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to Mercurial
        </h2>
        <p>
          <span class="application">Mercurial</span> is a distributed source
          control management tool similar to <span class=
          "application">Git</span> and <span class=
          "application">Bazaar</span>. <span class=
          "application">Mercurial</span> is written in <span class=
          "application">Python</span> and is used by projects such as Mozilla
          for Firefox and Thunderbird.
        </p>
        <p>
          This package is known to build and work properly using an LFS 12.4
          platform.
        </p>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Download (HTTP): <a class="ulink" href=
                "https://www.mercurial-scm.org/release/mercurial-7.1.tar.gz">https://www.mercurial-scm.org/release/mercurial-7.1.tar.gz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Download MD5 sum: 885a2a5ff89e78f066ec80b1ede5b314
              </p>
            </li>
            <li class="listitem">
              <p>
                Download size: 8.6 MB
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimated disk space required: 125 MB (with docs, add 32 MB
                for tests)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimated build time: 0.3 SBU (with docs; add 23 SBU for
                tests; both using parallelism=4)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Mercurial Dependencies
        </h3>
        <h4>
          Optional
        </h4>
        <p class="optional">
          <a class="xref" href="python-modules.html#pypa-build" title=
          "build-1.3.0">build-1.3.0</a>, <a class="xref" href=
          "python-modules.html#docutils" title=
          "docutils-0.21.2">docutils-0.21.2</a> (required to build the
          documentation), <a class="xref" href="git.html" title=
          "Git-2.50.1">git-2.50.1</a>, <a class="xref" href=
          "../postlfs/openssh.html" title="OpenSSH-10.0p1">OpenSSH-10.0p1</a>
          (runtime, to access ssh://... repositories), <a class="xref" href=
          "python-modules.html#pygments" title=
          "Pygments-2.19.2">Pygments-2.19.2</a>, <a class="xref" href=
          "rust.html" title="Rustc-1.89.0">rustc-1.89.0</a> (see <code class=
          "filename">rust/README.rst</code> and <code class=
          "filename">rust/rhg/README.md</code>), <a class="xref" href=
          "subversion.html" title="Subversion-1.14.5">Subversion-1.14.5</a>
          (with Python bindings), <a class="ulink" href=
          "https://www.nongnu.org/cvs/">CVS</a>, <a class="ulink" href=
          "https://pypi.python.org/pypi/pyflakes">pyflakes</a>, and <a class=
          "ulink" href="https://github.com/google/re2/">re2</a>
        </p>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of Mercurial
        </h2>
        <p>
          <span class="application">Mercurial</span> is built and installed
          in a single command as the <code class="systemitem">root</code>
          user:
        </p>
        <pre class="root"><kbd class=
        "command">make PREFIX=/usr install</kbd></pre>
        <p>
          The documentation is built by the above command (in man and html
          formats), but only the manual pages are installed. If you wish to
          install the html documentation, issue as the <code class=
          "systemitem">root</code> user:
        </p>
        <pre class="root"><kbd class=
        "command">mkdir /usr/share/doc/mercurial-7.1 &amp;&amp;
cp -R doc/html /usr/share/doc/mercurial-7.1</kbd></pre>
        <p>
          If you wish to run the tests, the rust tests must be removed as
          they are currently broken due to syntax errors. To do this, issue:
        </p>
        <pre class="userinput"><kbd class=
        "command">sed -i '151,154d' Makefile</kbd></pre>
        <p>
          To run the test suite, issue:
        </p>
        <pre class="userinput"><kbd class="command">TESTFLAGS="-j<em class=
        "replaceable"><code>&lt;N&gt;</code></em> --with-hg /usr/bin/hg" make check</kbd></pre>
        <p>
          where <em class="replaceable"><code>&lt;N&gt;</code></em> is an
          integer between one and the number of ( processor X threads ),
          inclusive (default is the total number of processors as returned by
          <span class="command"><strong>nproc</strong></span>). Tests may
          fail because some error messages have changed in Python or some
          deprecation warnings are printed that were not present when the
          test was designed.
        </p>
        <p>
          In order to investigate any apparently failing tests, you may use
          the <span class="command"><strong>run-tests.py</strong></span>
          script in the <code class="filename">tests</code> directory. To see
          the almost forty switches, some of them very useful, issue
          <span class="command"><strong>tests/run-tests.py
          --help</strong></span>. Running the following commands, you will
          execute only the tests that failed before:
        </p>
        <pre class="userinput"><kbd class="command">pushd tests  &amp;&amp;
  rm -rf tmp &amp;&amp;
  ./run-tests.py --with-hg /usr/bin/hg <em class=
"replaceable"><code>test-import.t</code></em>
popd</kbd></pre>
        <p>
          An interesting switch is <code class="option">--time</code>, which
          will generate a table of all the executed tests and their
          respective start, end, user, system and real times once the tests
          are complete. Note that these switches may be used with
          <span class="command"><strong>make check</strong></span> by
          including them in the <code class="envar">TESTFLAGS</code>
          environment variable.
        </p>
        <p>
          After installation, two very quick and simple tests should run
          correctly. The first one needs some configuration:
        </p>
        <pre class="userinput"><kbd class=
        "command">cat &gt;&gt; ~/.hgrc &lt;&lt; "EOF"
<code class="literal">[ui]
username = <em class=
"replaceable"><code>&lt;user_name&gt; &lt;user@mail&gt;</code></em></code>
EOF</kbd></pre>
        <p>
          where you must replace &lt;user_name&gt; and &lt;your@mail&gt;
          (mail is optional and can be omitted). With the user identity
          defined, run <span class="command"><strong>hg
          debuginstall</strong></span> and several lines will be displayed,
          the last one reading "no problems detected". Another quick and
          simple test is just <span class=
          "command"><strong>hg</strong></span>, which should output basic
          commands that can be used with <span class=
          "command"><strong>hg</strong></span>.
        </p>
      </div>
      <div class="configuration" lang="en" xml:lang="en">
        <h2 class="sect2">
          Configuring Mercurial
        </h2>
        <div class="sect3" lang="en" xml:lang="en">
          <h3 class="sect3">
            <a id="mercurial-config" name="mercurial-config"></a>Config Files
          </h3>
          <p>
            <code class="filename">/etc/mercurial/hgrc</code> and
            <code class="filename">~/.hgrc</code>
          </p>
          <p>
            The great majority of extensions are disabled by default. Run
            <span class="command"><strong>hg help extensions</strong></span>
            if you need to enable any, e.g. when investigating test failures.
            This will output a list of enabled and disabled extensions, as
            well as more information such as how to enable or disable
            extensions using configuration files.
          </p>
          <p>
            If you have installed <a class="xref" href=
            "../postlfs/make-ca.html" title=
            "make-ca-1.16.1">make-ca-1.16.1</a> and want <span class=
            "application">Mercurial</span> to use the certificates, as the
            <code class="systemitem">root</code> user, issue:
          </p>
          <pre class="root"><kbd class=
          "command">install -v -d -m755 /etc/mercurial &amp;&amp;
cat &gt; /etc/mercurial/hgrc &lt;&lt; "EOF"
<code class="literal">[web]
cacerts = /etc/pki/tls/certs/ca-bundle.crt</code>
EOF</kbd></pre>
        </div>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Programs:</strong>
              <span class="segbody">hg</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Libraries:</strong>
              <span class="segbody">several internal modules under
              /usr/lib/python3.13/site-packages/mercurial</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directories:</strong>
              <span class="segbody">/etc/mercurial,
              /usr/lib/python3.13/site-packages/hgdemandimport,
              /usr/lib/python3.13/site-packages/hgext,
              /usr/lib/python3.13/site-packages/hgext3rd,
              /usr/lib/python3.13/site-packages/mercurial,
              /usr/lib/python3.13/site-packages/mercurial-7.1.dist-info, and
              /usr/share/doc/mercurial-7.1</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="hg" name="hg"></a><span class="term"><span class=
                    "command"><strong>hg</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is the mercurial version control system
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="luajit.html" title=
          "luajit-20250816">Prev</a>
          <p>
            luajit-20250816
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="nasm.html" title="NASM-2.16.03">Next</a>
          <p>
            NASM-2.16.03
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="prog.html" title=
          "Chapter&nbsp;13.&nbsp;Programming">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch    (System V Edition) - Version 12.4">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
