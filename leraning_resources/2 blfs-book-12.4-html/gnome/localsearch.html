<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      localsearch-3.9.0
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL-NS Stylesheets Vsnapshot" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-12.4">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch <span class="phrase">(System
        V</span> Edition) - Version 12.4
      </h4>
      <h3>
        Chapter&nbsp;33.&nbsp;GNOME Libraries and Desktop
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="tinysparql.html" title=
          "tinysparql-3.9.2">Prev</a>
          <p>
            tinysparql-3.9.2
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="gsound.html" title="GSound-1.0.3">Next</a>
          <p>
            GSound-1.0.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="core.html" title=
          "Chapter&nbsp;33.&nbsp;GNOME Libraries and Desktop">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch    (System V Edition) - Version 12.4">Home</a>
        </li>
      </ul>
    </div>
    <h1 class="sect1">
      <a id="localsearch" name="localsearch"></a>localsearch-3.9.0
    </h1>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="package" lang="en" xml:lang="en">
        <h2 class="sect2">
          Introduction to Localsearch
        </h2>
        <p>
          The <span class="application">Localsearch</span> package contains a
          filesystem indexer as well as a metadata extractor.
        </p>
        <p>
          This package is known to build and work properly using an LFS 12.4
          platform.
        </p>
        <h3>
          Package Information
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Download (HTTP): <a class="ulink" href=
                "https://download.gnome.org/sources/localsearch/3.9/localsearch-3.9.0.tar.xz">
                https://download.gnome.org/sources/localsearch/3.9/localsearch-3.9.0.tar.xz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                Download MD5 sum: 6d29c941a4e10eb7fcc6e84d0d90053a
              </p>
            </li>
            <li class="listitem">
              <p>
                Download size: 4.3 MB
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimated disk space required: 35 MB (with tests)
              </p>
            </li>
            <li class="listitem">
              <p>
                Estimated build time: 0.2 SBU (with parallelism=4; add as
                much as 1.0 SBU for tests, dependent on disk speed)
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Additional Downloads
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Required patch: <a class="ulink" href=
                "https://www.linuxfromscratch.org/patches/blfs/12.4/localsearch-3.9.0-libxml2_2_14-1.patch">
                https://www.linuxfromscratch.org/patches/blfs/12.4/localsearch-3.9.0-libxml2_2_14-1.patch</a>
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Localsearch Dependencies
        </h3>
        <h4>
          Required
        </h4>
        <p class="required">
          <a class="xref" href="gexiv2.html" title=
          "gexiv2-0.14.6">gexiv2-0.14.6</a>, <a class="xref" href=
          "../multimedia/gst10-plugins-base.html" title=
          "gst-plugins-base-1.26.5">gst-plugins-base-1.26.5</a>, and
          <a class="xref" href="tinysparql.html" title=
          "tinysparql-3.9.2">tinysparql-3.9.2</a>
        </p>
        <h4>
          Recommended
        </h4>
        <p class="recommended">
          <a class="xref" href="../general/exempi.html" title=
          "Exempi-2.6.6">Exempi-2.6.6</a>, <a class="xref" href=
          "../general/giflib.html" title="giflib-5.2.2">giflib-5.2.2</a>,
          <a class="xref" href="../multimedia/ffmpeg.html" title=
          "FFmpeg-7.1.1">FFmpeg-7.1.1</a>, <a class="xref" href=
          "../general/icu.html" title="icu-77.1">ICU-77.1</a>, <a class=
          "xref" href="../general/libexif.html" title=
          "libexif-0.6.25">libexif-0.6.25</a>, <a class="xref" href=
          "../general/libgxps.html" title="libgxps-0.3.2">libgxps-0.3.2</a>,
          <a class="xref" href="../general/libseccomp.html" title=
          "libseccomp-2.6.0">libseccomp-2.6.0</a>, <a class="xref" href=
          "../general/poppler.html" title=
          "Poppler-25.08.0">Poppler-25.08.0</a>, and <a class="xref" href=
          "../general/upower.html" title="UPower-1.90.9">UPower-1.90.9</a>
        </p>
        <h4>
          Optional
        </h4>
        <p class="optional">
          <a class="xref" href="../general/python-modules.html#asciidoc"
          title="Asciidoc-10.2.1">asciidoc-10.2.1</a>, <a class="xref" href=
          "../general/cmake.html" title="CMake-4.1.0">CMake-4.1.0</a>,
          <a class="xref" href="dconf.html" title=
          "DConf-0.40.0 / DConf-Editor-45.0.1">DConf-0.40.0</a>, <a class=
          "xref" href="../general/libgsf.html" title=
          "libgsf-1.14.53">libgsf-1.14.53</a>, <a class="xref" href=
          "../basicnet/networkmanager.html" title=
          "NetworkManager-1.54.0">NetworkManager-1.54.0</a>, <a class="xref"
          href="../multimedia/taglib.html" title=
          "Taglib-2.1.1">taglib-2.1.1</a>, <a class="xref" href=
          "totem-pl-parser.html" title=
          "totem-pl-parser-3.26.6">totem-pl-parser-3.26.6</a>, <a class=
          "ulink" href="https://github.com/lipnitsk/libcue">libcue</a>,
          <a class="ulink" href=
          "https://libiptcdata.sourceforge.net/">libitpcdata</a>, <a class=
          "ulink" href="https://libosinfo.org">libosinfo</a>, and <a class=
          "ulink" href="https://gitlab.gnome.org/GNOME/gupnp">gupnp</a>
        </p>
      </div>
      <div class="kernel" lang="en" xml:lang="en">
        <h2 class="sect2">
          <a id="localsearch-kernel" name="localsearch-kernel"></a>Kernel
          Configuration
        </h2>
        <p>
          Enable the following options in the kernel configuration, then
          recompile the kernel and reboot if necessary:
        </p>
        <pre class="screen"><span class=
        "blue">S</span>ecurity options ---&gt;
  [*]        <span class=
"blue">E</span>nable different security models                         [SECURITY]
  [*]        <span class=
"blue">L</span>andlock support                                [SECURITY_LANDLOCK]
  # List more Linux Security Modules here (separated with comma) if needed,
  # for example 'landlock,lockdown,smack':
  (landlock) <span class=
"blue">O</span>rdered list of enabled LSMs                                  [LSM]</pre>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          Installation of Localsearch
        </h2>
        <div class="admon warning">
          <img alt="[Warning]" src="../images/warning.png" />
          <h3>
            Warning
          </h3>
          <p>
            If you are upgrading this package from a version where it was
            known as <span class="application">tracker-miners</span>, there
            are several files which will cause conflicts. Before installing
            this package, remove these files as the <code class=
            "systemitem">root</code> user:
          </p>
        </div>
        <pre class="root"><kbd class=
        "command">rm -fv /etc/xdg/autostart/tracker-miner-fs-3.desktop                           &amp;&amp;
rm -fv /usr/lib/systemd/user/tracker-miner-fs-3.service                        &amp;&amp;
rm -fv /usr/lib/systemd/user/tracker-miner-fs-control-3.service                &amp;&amp;
rm -fv /usr/share/dbus-1/services/org.freedesktop.Tracker3.Miner.Files.service &amp;&amp;
rm -fv /usr/share/dbus-1/services/org.freedesktop.Tracker3.Writeback.service   &amp;&amp;
rm -fv /usr/share/dbus-1/services/org.freedesktop.Tracker3.Miner.Files.Control.service</kbd></pre>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            If you plan to run the tests, some timeouts are too short when
            using spinning disks. There are two places where timeouts are
            used: first, individual tests inside a group of tests have a
            default timeout of 10s. This can be changed by setting the
            environment variable <code class=
            "envar">TRACKER_TESTS_AWAIT_TIMEOUT</code> to the desired value
            when running the tests (see below). Second, a global timeout for
            a group of tests is fixed at configuration time. The default
            value in the <code class="filename">functional-tests</code>
            directory (other directories have only short lived tests) may be
            increased with the following command (replace 200 with a value
            suitable for your machine):
          </p>
          <pre class="userinput"><kbd class="command">sed -i s/120/<em class=
          "replaceable"><code>200</code></em>/ tests/functional-tests/meson.build</kbd></pre>
        </div>
        <p>
          First, apply a patch to make the HTML extractor compatible with
          libxml2-2.14 and later:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../localsearch-3.9.0-libxml2_2_14-1.patch</kbd></pre>
        <p>
          Install <span class="application">Localsearch</span> by running the
          following commands:
        </p>
        <pre class="userinput"><kbd class="command">mkdir build &amp;&amp;
cd    build &amp;&amp;

meson setup --prefix=/usr                  \
            --buildtype=release            \
            -D systemd_user_services=false \
            -D man=false                   \
            ..                             &amp;&amp;
ninja</kbd></pre>
        <p>
          To test the results, issue (adjust the individual test timeout to a
          value suitable for your machine, see the note above):
        </p>
        <pre class="userinput"><kbd class=
        "command">dbus-run-session env LC_ALL=C.UTF-8 TRACKER_TESTS_AWAIT_TIMEOUT=<em class="replaceable"><code>20</code></em> \
                 ninja test &amp;&amp;
rm -rf ~/tracker-tests</kbd></pre>
        <p>
          Now, as the <code class="systemitem">root</code> user:
        </p>
        <pre class="root"><kbd class="command">ninja install</kbd></pre>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            The tests create files in the user directory (up to 24 MB), so
            they have to be removed afterwards.
          </p>
        </div>
      </div>
      <div class="commands" lang="en" xml:lang="en">
        <h2 class="sect2">
          Command Explanations
        </h2>
        <p>
          <em class="parameter"><code>--buildtype=release</code></em>:
          Specify a buildtype suitable for stable releases of the package, as
          the default may produce unoptimized binaries.
        </p>
        <p>
          <em class="parameter"><code>-D man=false</code></em>: This switch
          prevents the build process from generating man pages. Omit this
          switch if you have <a class="xref" href=
          "../general/python-modules.html#asciidoc" title=
          "Asciidoc-10.2.1">asciidoc-10.2.1</a> installed and wish to
          generate and install the man pages.
        </p>
        <p>
          <em class="parameter"><code>-D
          systemd_user_services=false</code></em>: This switch prevents the
          build process from installing systemd units since they are useless
          on SysV systems.
        </p>
        <p>
          <code class="option">-D seccomp=false</code>: This option disables
          the seccomp system call filter. On some architectures, such as i686
          and ARM, the functions that tracker-miners uses are not guarded
          properly, and tracker-miners will get killed with a SIGSYS as a
          result. Note that disabling seccomp may cause the system to be
          compromised worse in the event that a security vulnerability in
          localsearch or its dependencies is exploited.
        </p>
        <p>
          <code class="option">-D landlock=disabled</code>: This switch
          disables the Landlock file access sandbox. Use it if you don't want
          to build the kernel with Landlock support. Note that disabling
          Landlock may cause the system to be compromised worse in the event
          that a security vulnerability in localsearch or its dependencies is
          exploited.
        </p>
        <p>
          <code class="option">-D battery_detection=none</code>: Use this
          option if you have not installed the recommended dependency upower.
          Do not use this option if your system has a battery (laptop battery
          or UPS), or else localsearch may waste battery life when A/C power
          is unavailable.
        </p>
        <p>
          <code class="option">-D libav=disabled</code>: Use this option if
          you have not installed the recommended dependency ffmpeg. Note that
          using this will cause 7 test failures, and will also significantly
          hamper the functionality of this package.
        </p>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          Contents
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed Programs:</strong>
              <span class="segbody">localsearch</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Libraries:</strong>
              <span class="segbody">Several modules under
              /usr/lib/localsearch-3.0</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Installed Directories:</strong>
              <span class="segbody">/usr/lib/localsearch-3.0 and
              /usr/share/localsearch3</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="localsearch-prog" name=
                    "localsearch-prog"></a><span class="term"><span class=
                    "command"><strong>localsearch</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    starts, stops, restarts, and lists daemons responsible
                    for indexing content
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="tinysparql.html" title=
          "tinysparql-3.9.2">Prev</a>
          <p>
            tinysparql-3.9.2
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="gsound.html" title="GSound-1.0.3">Next</a>
          <p>
            GSound-1.0.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="core.html" title=
          "Chapter&nbsp;33.&nbsp;GNOME Libraries and Desktop">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch    (System V Edition) - Version 12.4">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
